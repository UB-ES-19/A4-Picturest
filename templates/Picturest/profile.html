{% extends 'Picturest/navbar_PicBase.html' %}
{% block title %}Profile{% endblock %}
{% block content %}
    <div class="container">
        {% if you %}
            <a href="{% url 'edit_profile' %}" class="button">Edit profile</a>
        {% else %}
            <form class="form-inline" method="POST">
                {% csrf_token %}
                {% if disabled %}
                    <button class="btn btn-danger" type="submit" disabled>Follow</button>
                {% else %}
                    <button class="btn btn-danger" type="submit">Follow</button>
                {% endif %}
            </form>
        {% endif %}
        <br>
        <div class="row">
            <div class="col-md-6 details">
                <blockquote>
                    <h1>{{ user.first_name }} {{ user.last_name }}</h1>
                    <small><cite title="Source Title">{{ user.location }} <i
                            class="icon-map-marker"></i></cite></small>
                </blockquote>
                <p>
                    {{ user.about }}
                </p>
                {% if you %}
                   <a href="{%url 'search_friends' %}">
                        {{ followers }} followers
                   </a>
                    <a href="{%url 'search_friends' %}">
                        {{ followings }} following
                    </a>
                {% else %}
                    <p>
                        {{ followers }} followers | {{ followings }} following
                    </p>
                {% endif %}
            </div>
            <div class="col-md-6 img">
                <img class="rounded-circle z-depth-2" alt="100x100" src="{{ user.photo.url }}" data-holder-rendered="true">
                {% comment %} <img class="rounded-circle z-depth-2" alt="100x100" src="https://cdn4.iconfinder.com/data/icons/random-112/750/Random-21-128.png" data-holder-rendered="true"> {% endcomment %}
            </div>
        </div>

        {% if you %}
            <div class="interests-modal-triggerers">
                <button class="btn btn-outline-danger" data-toggle="modal" data-target="#new_interests" class="button">Select new interests</button>
            </div>
            <div class="modal fade" id="new_interests" tabindex="-1" role="dialog" aria-labelledby="interests_modal" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="interests_title">Choose many interests as you want</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form method="POST">
                                {% csrf_token %}
                                <div class="list-group">
                                    {% for key, value in interest_values.items %}
                                        {% if value %}
                                            <input type="checkbox" name={{ key }} value={{ key }} id={{key }} checked>
                                        {% else %}
                                            <input type="checkbox" name={{ key }} value={{ key }} id={{key }}>
                                        {% endif %}
                                        <label class="list-group-item" name={{ key }} for={{ key }} style=" margin-bottom: 0.25em;"> {{ key }}</label>
                                    {% endfor %}
                                </div>

                                <div class="modal-footer">
                                    <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Close</button>
                                    <button type="summit" value="save" class="btn btn-danger">Save changes</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
        <br>

        <nav>
            <div class="nav nav-tabs" id="nav-tab" role="tablist">
                <a class="nav-item nav-link" id="nav-boards-tab" data-toggle="tab" href="#boards" role="tab" aria-controls="nav-boards" aria-selected="false">Boards</a>
                <a class="nav-item nav-link" id="nav-pins-tab" data-toggle="tab" href="#pins" role="tab" aria-controls="nav-pins" aria-selected="false">Pins</a>
            </div>
        </nav>

        <div class="collapse" id="collapseBoards">
            <div id="carouselExampleFade" class="carousel slide carousel-fade" data-ride="carousel">
              <div class="carousel-inner">
                <div class="carousel-item active">
                  <img src="..." class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                  <img src="..." class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                  <img src="..." class="d-block w-100" alt="...">
                </div>
              </div>
              <a class="carousel-control-prev" href="#carouselExampleFade" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href="#carouselExampleFade" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>
            </div>

        </div>

    </div>
    
    <div class="tab-content" id="nav-tabContent">

        <div class="tab-pane fade" id="pins" role="tabpanel" aria-labelledby="nav-pins-tab">
            <ul class="list-group col-3">
                <br>
                {% for pin in user_pins %}
                    <a class="btn btn-outline-primary list-group-item list-group-item-action" role="button" aria-disabled="true" href="{% url 'pin' pin.pin_id %}">
                        <img style="width:150px; height:150px;" src="{{ pin.post.url }}" data-holder-rendered="true">
                        <br><br>
                        {{ pin.title }} ({{ pin.author.username }})
                    </a>
                {% endfor %}
            </ul>
        </div>
            

        <div class="tab-pane fade" id="boards" role="tabpanel" aria-labelledby="nav-boards-tab">
            <ul class="list-group col-3">
                <br>
                {% for board in user_boards %}
                    <a class="btn btn-outline-primary list-group-item list-group-item-action" role="button" aria-disabled="true" href="{% url 'board' board.board_id %}">
<!--                        {% for pin in board.pins %}-->
<!--                            <img style="width:50px; height:50px;" src="{{ pin.post.url }}" data-holder-rendered="true">-->
<!--                        {% endfor %}-->
<!--                        <br>-->
                        {{ board.name}} ({{ board.author.username }})
                    </a>
                {% endfor %}
            </ul>
        </div>
    </div>


{% endblock %}
